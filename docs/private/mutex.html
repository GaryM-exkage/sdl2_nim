<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>mutex</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);

  const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">mutex</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="../index.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="mutexdotnim_toc" href="#mutexdotnim">mutex.nim</a></li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Mutex"
    title="Mutex* = pointer">Mutex</a></li>
  <li><a class="reference" href="#Semaphore"
    title="Semaphore* = pointer">Semaphore</a></li>
  <li><a class="reference" href="#Sem"
    title="Sem* = Semaphore">Sem</a></li>
  <li><a class="reference" href="#Cond"
    title="Cond* = pointer">Cond</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#10" id="60">Consts</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#MUTEX_TIMEDOUT"
    title="MUTEX_TIMEDOUT* = 1">MUTEX_TIMEDOUT</a></li>
  <li><a class="reference" href="#MUTEX_MAXWAIT"
    title="MUTEX_MAXWAIT* = (not uint32(0))">MUTEX_MAXWAIT</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#createMutex"
    title="createMutex*(): Mutex">createMutex</a></li>
  <li><a class="reference" href="#lockMutex%2CMutex"
    title="lockMutex*(mutex: Mutex): cint">lockMutex</a></li>
  <li><a class="reference" href="#tryLockMutex%2CMutex"
    title="tryLockMutex*(mutex: Mutex): cint">tryLockMutex</a></li>
  <li><a class="reference" href="#unlockMutex%2CMutex"
    title="unlockMutex*(mutex: Mutex): cint">unlockMutex</a></li>
  <li><a class="reference" href="#destroyMutex%2CMutex"
    title="destroyMutex*(mutex: Mutex)">destroyMutex</a></li>
  <li><a class="reference" href="#createSemaphore%2Cuint32"
    title="createSemaphore*(initial_value: uint32): Sem">createSemaphore</a></li>
  <li><a class="reference" href="#destroySemaphore%2CSem"
    title="destroySemaphore*(sem: Sem)">destroySemaphore</a></li>
  <li><a class="reference" href="#semWait%2CSem"
    title="semWait*(sem: Sem): cint">semWait</a></li>
  <li><a class="reference" href="#semTryWait%2CSem"
    title="semTryWait*(sem: Sem): cint">semTryWait</a></li>
  <li><a class="reference" href="#semWaitTimeout%2CSem%2Cuint32"
    title="semWaitTimeout*(sem: Sem; ms: uint32): cint">semWaitTimeout</a></li>
  <li><a class="reference" href="#semPost%2CSem"
    title="semPost*(sem: Sem): cint">semPost</a></li>
  <li><a class="reference" href="#semValue%2CSem"
    title="semValue*(sem: Sem): uint32">semValue</a></li>
  <li><a class="reference" href="#createCond"
    title="createCond*(): Cond">createCond</a></li>
  <li><a class="reference" href="#destroyCond%2CCond"
    title="destroyCond*(cond: Cond)">destroyCond</a></li>
  <li><a class="reference" href="#condSignal%2CCond"
    title="condSignal*(cond: Cond): cint">condSignal</a></li>
  <li><a class="reference" href="#condBroadcast%2CCond"
    title="condBroadcast*(cond: Cond): cint">condBroadcast</a></li>
  <li><a class="reference" href="#condWait%2CCond%2CMutex"
    title="condWait*(cond: Cond; mutex: Mutex): cint">condWait</a></li>
  <li><a class="reference" href="#condWaitTimeout%2CCond%2CMutex%2Cuint32"
    title="condWaitTimeout*(cond: Cond; mutex: Mutex; ms: uint32): cint">condWaitTimeout</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#mutexP.t%2Cuntyped"
    title="mutexP*(m: untyped): untyped">mutexP</a></li>
  <li><a class="reference" href="#mutexV.t%2Cuntyped"
    title="mutexV*(m: untyped): untyped">mutexV</a></li>

  </ul>
</li>

</ul>

  </div>
  
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc">
<h1><a class="toc-backref" id="mutexdotnim" href="#mutexdotnim">mutex.nim</a></h1><p>Procedures to provide thread synchronization primitives.</p>
</p>
  <div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="Mutex"></a>
<dt><pre><span class="Identifier">Mutex</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Identifier">pointer</span></pre></dt>
<dd>

The SDL mutex structure, defined in SDL_sysmutex.c

</dd>
<a id="Semaphore"></a>
<dt><pre><span class="Identifier">Semaphore</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Identifier">pointer</span></pre></dt>
<dd>

The SDL semaphore structure, defined in SDL_syssem.c

</dd>
<a id="Sem"></a>
<dt><pre><span class="Identifier">Sem</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Identifier">Semaphore</span></pre></dt>
<dd>



</dd>
<a id="Cond"></a>
<dt><pre><span class="Identifier">Cond</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Identifier">pointer</span></pre></dt>
<dd>


The SDL condition variable structure, defined in SDL_syscond.c

</dd>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#10">Consts</a></h1>
<dl class="item">
<a id="MUTEX_TIMEDOUT"></a>
<dt><pre><span class="Identifier">MUTEX_TIMEDOUT</span><span class="Operator">*</span> <span class="Other">=</span> <span class="DecNumber">1</span></pre></dt>
<dd>


Synchronization procedures which can time out return this value if they time out.

</dd>
<a id="MUTEX_MAXWAIT"></a>
<dt><pre><span class="Identifier">MUTEX_MAXWAIT</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Other">(</span><span class="Keyword">not</span> <span class="Identifier">uint32</span><span class="Other">(</span><span class="DecNumber">0</span><span class="Other">)</span><span class="Other">)</span></pre></dt>
<dd>

This is the timeout value which corresponds to never time out.

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="createMutex"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#createMutex"><span class="Identifier">createMutex</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Mutex</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CreateMutex&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Create a mutex, initialized unlocked.

</dd>
<a id="lockMutex,Mutex"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#lockMutex%2CMutex"><span class="Identifier">lockMutex</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">mutex</span><span class="Other">:</span> <span class="Identifier">Mutex</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_LockMutex&quot;</span><span class="Other">,</span>
                                      <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Lock the mutex.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt>, or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="tryLockMutex,Mutex"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#tryLockMutex%2CMutex"><span class="Identifier">tryLockMutex</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">mutex</span><span class="Other">:</span> <span class="Identifier">Mutex</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_TryLockMutex&quot;</span><span class="Other">,</span>
    <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Try to lock the mutex</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt>, <tt class="docutils literal"><span class="pre">MUTEX_TIMEDOUT</span></tt>, or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="unlockMutex,Mutex"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#unlockMutex%2CMutex"><span class="Identifier">unlockMutex</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">mutex</span><span class="Other">:</span> <span class="Identifier">Mutex</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_UnlockMutex&quot;</span><span class="Other">,</span>
                                        <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Unlock the mutex.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt>, or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>
<p><tt class="docutils literal"><span class="pre">Warning:</span></tt> It is an error to unlock a mutex that has not been locked by the current thread, and doing so results in undefined behavior.</p>


</dd>
<a id="destroyMutex,Mutex"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#destroyMutex%2CMutex"><span class="Identifier">destroyMutex</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">mutex</span><span class="Other">:</span> <span class="Identifier">Mutex</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_DestroyMutex&quot;</span><span class="Other">,</span>
                                   <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Destroy a mutex.

</dd>
<a id="createSemaphore,uint32"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#createSemaphore%2Cuint32"><span class="Identifier">createSemaphore</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">initial_value</span><span class="Other">:</span> <span class="Identifier">uint32</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Sem</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span>
    <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CreateSemaphore&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Create a semaphore, initialized with value, returns <tt class="docutils literal"><span class="pre">nil</span></tt> on failure.

</dd>
<a id="destroySemaphore,Sem"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#destroySemaphore%2CSem"><span class="Identifier">destroySemaphore</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">sem</span><span class="Other">:</span> <span class="Identifier">Sem</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_DestroySemaphore&quot;</span><span class="Other">,</span>
                                   <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Destroy a semaphore.

</dd>
<a id="semWait,Sem"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#semWait%2CSem"><span class="Identifier">semWait</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">sem</span><span class="Other">:</span> <span class="Identifier">Sem</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_SemWait&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

This procedure suspends the calling thread until the semaphore pointed to by <tt class="docutils literal"><span class="pre">sem</span></tt> has a positive count. It then atomically decreases the semaphore count.

</dd>
<a id="semTryWait,Sem"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#semTryWait%2CSem"><span class="Identifier">semTryWait</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">sem</span><span class="Other">:</span> <span class="Identifier">Sem</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_SemTryWait&quot;</span><span class="Other">,</span>
                                   <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Non-blocking variant of <tt class="docutils literal"><span class="pre">semWait()</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt> if the wait succeeds, <tt class="docutils literal"><span class="pre">MUTEX_TIMEDOUT</span></tt> if the wait would block, and <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="semWaitTimeout,Sem,uint32"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#semWaitTimeout%2CSem%2Cuint32"><span class="Identifier">semWaitTimeout</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">sem</span><span class="Other">:</span> <span class="Identifier">Sem</span><span class="Other">;</span> <span class="Identifier">ms</span><span class="Other">:</span> <span class="Identifier">uint32</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span>
    <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_SemWaitTimeout&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Variant of <tt class="docutils literal"><span class="pre">semWait()</span></tt> with a timeout in milliseconds.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt> if the wait succeeds, <tt class="docutils literal"><span class="pre">MUTEX_TIMEDOUT</span></tt> if the wait does not succeed in the allotted time, and <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>
<p><tt class="docutils literal"><span class="pre">Warning:</span></tt> On some platforms this procedure is implemented by looping with a delay of 1 ms, and so should be avoided if possible.</p>


</dd>
<a id="semPost,Sem"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#semPost%2CSem"><span class="Identifier">semPost</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">sem</span><span class="Other">:</span> <span class="Identifier">Sem</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_SemPost&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Atomically increases the semaphore's count (not blocking).</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt>, or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="semValue,Sem"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#semValue%2CSem"><span class="Identifier">semValue</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">sem</span><span class="Other">:</span> <span class="Identifier">Sem</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">uint32</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_SemValue&quot;</span><span class="Other">,</span>
                                   <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Returns the current count of the semaphore.

</dd>
<a id="createCond"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#createCond"><span class="Identifier">createCond</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Cond</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CreateCond&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Create a condition variable.</p>
<p>Typical use of condition variables:</p>
<p>Thread A:</p>
<pre class="listing"><span class="Identifier">lockMutex</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span>

<span class="Keyword">while</span> <span class="Punctuation">(</span><span class="Keyword">not</span> <span class="Identifier">condition</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  
  <span class="Identifier">condWait</span><span class="Punctuation">(</span><span class="Identifier">cond</span><span class="Punctuation">,</span> <span class="Identifier">lock</span><span class="Punctuation">)</span>

<span class="Identifier">unlockMutex</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></pre><p>Thread B:</p>
<pre class="listing"><span class="Identifier">lockMutex</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span>
<span class="Operator">...</span>
<span class="Identifier">condition</span> <span class="Operator">=</span> <span class="Identifier">true</span>
<span class="Operator">...</span>
<span class="Identifier">condSignal</span><span class="Punctuation">(</span><span class="Identifier">cond</span><span class="Punctuation">)</span>
<span class="Identifier">unlockMutex</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></pre><p>There is some discussion whether to signal the condition variable with the mutex locked or not. There is some potential performance benefit to unlocking first on some platforms, but there are some potential race conditions depending on how your code is structured.</p>
<p>In general it's safer to signal the condition variable while the mutex is locked.</p>


</dd>
<a id="destroyCond,Cond"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#destroyCond%2CCond"><span class="Identifier">destroyCond</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">cond</span><span class="Other">:</span> <span class="Identifier">Cond</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_DestroyCond&quot;</span><span class="Other">,</span>
                                <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Destroy a condition variable.

</dd>
<a id="condSignal,Cond"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#condSignal%2CCond"><span class="Identifier">condSignal</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">cond</span><span class="Other">:</span> <span class="Identifier">Cond</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CondSignal&quot;</span><span class="Other">,</span>
                                     <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Restart one of the threads that are waiting on the condition variable.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt> or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="condBroadcast,Cond"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#condBroadcast%2CCond"><span class="Identifier">condBroadcast</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">cond</span><span class="Other">:</span> <span class="Identifier">Cond</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CondBroadcast&quot;</span><span class="Other">,</span>
                                        <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Restart all threads that are waiting on the condition variable.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt> or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="condWait,Cond,Mutex"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#condWait%2CCond%2CMutex"><span class="Identifier">condWait</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">cond</span><span class="Other">:</span> <span class="Identifier">Cond</span><span class="Other">;</span> <span class="Identifier">mutex</span><span class="Other">:</span> <span class="Identifier">Mutex</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span> <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CondWait&quot;</span><span class="Other">,</span>
    <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Wait on the condition variable, unlocking the provided mutex.</p>
<p><tt class="docutils literal"><span class="pre">Warning:</span></tt> The mutex must be locked before entering this procedure!</p>
<p>The mutex is re-locked once the condition variable is signaled.</p>
<p><tt class="docutils literal"><span class="pre">Return</span></tt> <tt class="docutils literal"><span class="pre">0</span></tt> when it is signaled, or <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>


</dd>
<a id="condWaitTimeout,Cond,Mutex,uint32"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#condWaitTimeout%2CCond%2CMutex%2Cuint32"><span class="Identifier">condWaitTimeout</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">cond</span><span class="Other">:</span> <span class="Identifier">Cond</span><span class="Other">;</span> <span class="Identifier">mutex</span><span class="Other">:</span> <span class="Identifier">Mutex</span><span class="Other">;</span> <span class="Identifier">ms</span><span class="Other">:</span> <span class="Identifier">uint32</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">cint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">cdecl</span><span class="Other">,</span>
    <span class="Identifier">importc</span><span class="Other">:</span> <span class="StringLit">&quot;SDL_CondWaitTimeout&quot;</span><span class="Other">,</span> <span class="Identifier">dynlib</span><span class="Other">:</span> <span class="Identifier">SDL2_LIB</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

<p>Waits for at most <tt class="docutils literal"><span class="pre">ms</span></tt> milliseconds, and returns <tt class="docutils literal"><span class="pre">0</span></tt> if the condition variable is signaled, <tt class="docutils literal"><span class="pre">MUTEX_TIMEDOUT</span></tt> if the condition is not signaled in the allotted time, and <tt class="docutils literal"><span class="pre">-1</span></tt> on error.</p>
<p><tt class="docutils literal"><span class="pre">Warning:</span></tt> On some platforms this procedure is implemented by looping with a delay of 1 ms, and so should be avoided if possible.</p>


</dd>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<a id="mutexP.t,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#mutexP.t%2Cuntyped"><span class="Identifier">mutexP</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">m</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


Wrapper for the <tt class="docutils literal"><span class="pre">lockMutex()</span></tt>.

</dd>
<a id="mutexV.t,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#mutexV.t%2Cuntyped"><span class="Identifier">mutexV</span></a><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">m</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


Wrapper for the <tt class="docutils literal"><span class="pre">unlockMutex()</span></tt>.

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2020-12-27 16:44:23 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
